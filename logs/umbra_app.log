{"timestamp": "2025-07-13T14:25:03.314682Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "Logger initialized for module: src.data_engineering.db_utils", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:25:03.314904Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "DEBUG: Constructed DATABASE_URL: postgresql://umbra_user:umbra_dev_password123@localhost:5432/umbra_db", "module": "db_utils", "function": "<module>", "line": 26, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:25:03.450194Z", "level": "INFO", "logger": "src.api.v1.crud", "message": "Logger initialized for module: src.api.v1.crud", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:25:03.450602Z", "level": "INFO", "logger": "src.data_collection.data_ingestion", "message": "Logger initialized for module: src.data_collection.data_ingestion", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:25:03.506378Z", "level": "INFO", "logger": "src.api.v1.security", "message": "Logger initialized for module: src.api.v1.security", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:25:03.506759Z", "level": "INFO", "logger": "src.api.v1.endpoints.courses", "message": "Logger initialized for module: src.api.v1.endpoints.courses", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139706641992640, "thread_name": "MainThread", "process": 23748, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.583804Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "Logger initialized for module: src.data_engineering.db_utils", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.584494Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "DEBUG: Constructed DATABASE_URL: postgresql://umbra_user:umbra_dev_password123@localhost:5432/umbra_db", "module": "db_utils", "function": "<module>", "line": 26, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.679084Z", "level": "INFO", "logger": "src.api.v1.crud", "message": "Logger initialized for module: src.api.v1.crud", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.679420Z", "level": "INFO", "logger": "src.data_collection.data_ingestion", "message": "Logger initialized for module: src.data_collection.data_ingestion", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.713792Z", "level": "INFO", "logger": "src.api.v1.security", "message": "Logger initialized for module: src.api.v1.security", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.714225Z", "level": "INFO", "logger": "src.api.v1.endpoints.courses", "message": "Logger initialized for module: src.api.v1.endpoints.courses", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.721452Z", "level": "INFO", "logger": "src.api.v1.endpoints.users", "message": "Logger initialized for module: src.api.v1.endpoints.users", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.727605Z", "level": "INFO", "logger": "src.api.v1.endpoints.learning_paths", "message": "Logger initialized for module: src.api.v1.endpoints.learning_paths", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:14.735145Z", "level": "INFO", "logger": "src.api.v1.main", "message": "Logger initialized for module: src.api.v1.main", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 140539402447808, "thread_name": "MainThread", "process": 28776, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.610407Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "Logger initialized for module: src.data_engineering.db_utils", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.610627Z", "level": "INFO", "logger": "src.data_engineering.db_utils", "message": "DEBUG: Constructed DATABASE_URL: postgresql://umbra_user:umbra_dev_password123@localhost:5432/umbra_db", "module": "db_utils", "function": "<module>", "line": 26, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.696033Z", "level": "INFO", "logger": "src.api.v1.crud", "message": "Logger initialized for module: src.api.v1.crud", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.696347Z", "level": "INFO", "logger": "src.data_collection.data_ingestion", "message": "Logger initialized for module: src.data_collection.data_ingestion", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.728654Z", "level": "INFO", "logger": "src.api.v1.security", "message": "Logger initialized for module: src.api.v1.security", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.729038Z", "level": "INFO", "logger": "src.api.v1.endpoints.courses", "message": "Logger initialized for module: src.api.v1.endpoints.courses", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.735715Z", "level": "INFO", "logger": "src.api.v1.endpoints.users", "message": "Logger initialized for module: src.api.v1.endpoints.users", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.741668Z", "level": "INFO", "logger": "src.api.v1.endpoints.learning_paths", "message": "Logger initialized for module: src.api.v1.endpoints.learning_paths", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.748729Z", "level": "INFO", "logger": "src.api.v1.main", "message": "Logger initialized for module: src.api.v1.main", "module": "logging_utils", "function": "setup_logging", "line": 29, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.771063Z", "level": "ERROR", "logger": "src.data_engineering.db_utils", "message": "Database health check failed: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "module": "db_utils", "function": "check_db_health", "line": 96, "thread": 139864488011456, "thread_name": "AnyIO worker thread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.775988Z", "level": "ERROR", "logger": "src.api.v1.main", "message": "HTTP Exception occurred: Database connection failed (Status: 500)", "module": "main", "function": "http_exception_handler", "line": 66, "thread": 139864496404160, "thread_name": "Thread-1 (run_blocking_portal)", "process": 28904, "exception": {"type": "HTTPException", "message": "500: Database connection failed", "traceback": ["Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/routing.py\", line 72, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/fastapi/routing.py\", line 278, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        dependant=dependant, values=values, is_coroutine=is_coroutine\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/fastapi/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/concurrency.py\", line 42, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py\", line 2470, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py\", line 967, in run\n    result = context.run(func, *args)\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/main.py\", line 99, in health_check\n    raise HTTPException(\n    ...<2 lines>...\n    )\n", "fastapi.exceptions.HTTPException: 500: Database connection failed\n"]}, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
{"timestamp": "2025-07-13T14:35:23.780620Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://testserver/health \"HTTP/1.1 500 Internal Server Error\"", "module": "_client", "function": "_send_single_request", "line": 1026, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.782488Z", "level": "INFO", "logger": "src.api.v1.endpoints.courses", "message": "API Request started: read_courses", "module": "logging_utils", "function": "sync_wrapper", "line": 163, "thread": 139864479618752, "thread_name": "AnyIO worker thread", "process": 28904, "request_id": "9efdebca-35e5-4e6b-8605-a68113223f5a", "taskName": null, "api_endpoint": "read_courses"}
{"timestamp": "2025-07-13T14:35:23.782707Z", "level": "INFO", "logger": "src.api.v1.endpoints.courses", "message": "Course retrieval request", "module": "courses", "function": "read_courses", "line": 141, "thread": 139864479618752, "thread_name": "AnyIO worker thread", "process": 28904, "request_id": "9efdebca-35e5-4e6b-8605-a68113223f5a", "taskName": null, "skip": 0, "limit": 100, "sort_by": null, "sort_order": "asc", "has_filters": false}
{"timestamp": "2025-07-13T14:35:23.818908Z", "level": "ERROR", "logger": "src.api.v1.endpoints.courses", "message": "Error retrieving courses: 500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "module": "courses", "function": "read_courses", "line": 196, "thread": 139864479618752, "thread_name": "AnyIO worker thread", "process": 28904, "request_id": "9efdebca-35e5-4e6b-8605-a68113223f5a", "exception": {"type": "DatabaseError", "message": "500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 89, in get_courses\n    return query.offset(skip).limit(limit).all()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3273, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2436, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/endpoints/courses.py\", line 172, in read_courses\n    courses = crud.get_courses(\n        db,\n    ...<4 lines>...\n        filter_criteria=parsed_filter_criteria,\n    )\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 91, in get_courses\n    raise DatabaseError(detail=f\"Could not retrieve courses: {e}\") from e\n", "src.api.v1.exceptions.DatabaseError: 500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "taskName": null, "error_type": "DatabaseError"}
{"timestamp": "2025-07-13T14:35:23.842841Z", "level": "ERROR", "logger": "src.api.v1.endpoints.courses", "message": "API Request failed: read_courses", "module": "logging_utils", "function": "sync_wrapper", "line": 191, "thread": 139864479618752, "thread_name": "AnyIO worker thread", "process": 28904, "request_id": "9efdebca-35e5-4e6b-8605-a68113223f5a", "exception": {"type": "DatabaseError", "message": "500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 89, in get_courses\n    return query.offset(skip).limit(limit).all()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3273, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2436, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/utils/logging_utils.py\", line 171, in sync_wrapper\n    result = func(*args, **kwargs)\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/endpoints/courses.py\", line 172, in read_courses\n    courses = crud.get_courses(\n        db,\n    ...<4 lines>...\n        filter_criteria=parsed_filter_criteria,\n    )\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 91, in get_courses\n    raise DatabaseError(detail=f\"Could not retrieve courses: {e}\") from e\n", "src.api.v1.exceptions.DatabaseError: 500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "taskName": null, "api_endpoint": "read_courses", "duration_seconds": 0.05028367042541504, "status": "error", "error_type": "DatabaseError", "performance_metric": true}
{"timestamp": "2025-07-13T14:35:23.873075Z", "level": "ERROR", "logger": "src.api.v1.main", "message": "Database Error occurred: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "module": "main", "function": "database_exception_handler", "line": 39, "thread": 139864496404160, "thread_name": "Thread-2 (run_blocking_portal)", "process": 28904, "exception": {"type": "DatabaseError", "message": "500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 89, in get_courses\n    return query.offset(skip).limit(limit).all()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3273, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2436, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/routing.py\", line 72, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/fastapi/routing.py\", line 278, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        dependant=dependant, values=values, is_coroutine=is_coroutine\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/fastapi/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/starlette/concurrency.py\", line 42, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py\", line 2470, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py\", line 967, in run\n    result = context.run(func, *args)\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/utils/logging_utils.py\", line 171, in sync_wrapper\n    result = func(*args, **kwargs)\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/endpoints/courses.py\", line 172, in read_courses\n    courses = crud.get_courses(\n        db,\n    ...<4 lines>...\n        filter_criteria=parsed_filter_criteria,\n    )\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 91, in get_courses\n    raise DatabaseError(detail=f\"Could not retrieve courses: {e}\") from e\n", "src.api.v1.exceptions.DatabaseError: 500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
{"timestamp": "2025-07-13T14:35:23.890106Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://testserver/courses/ \"HTTP/1.1 500 Internal Server Error\"", "module": "_client", "function": "_send_single_request", "line": 1026, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
{"timestamp": "2025-07-13T14:35:23.891991Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://testserver/docs \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1026, "thread": 139864840293312, "thread_name": "MainThread", "process": 28904, "taskName": null}
