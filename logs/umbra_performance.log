{"timestamp": "2025-07-13T14:35:23.856991Z", "level": "ERROR", "logger": "src.api.v1.endpoints.courses", "message": "API Request failed: read_courses", "module": "logging_utils", "function": "sync_wrapper", "line": 191, "thread": 139864479618752, "thread_name": "AnyIO worker thread", "process": 28904, "request_id": "9efdebca-35e5-4e6b-8605-a68113223f5a", "exception": {"type": "DatabaseError", "message": "500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", "traceback": ["Traceback (most recent call last):\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 89, in get_courses\n    return query.offset(skip).limit(limit).all()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2704, in all\n    return self._iter().all()  # type: ignore\n           ~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2241, in _execute_internal\n    conn = self._connection_for_bind(bind)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2110, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"<string>\", line 2, in _connection_for_bind\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 1189, in _connection_for_bind\n    conn = bind.connect()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3273, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 147, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2436, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 145, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 3297, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 449, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 713, in checkout\n    rec = pool._do_get()\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 179, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/impl.py\", line 177, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 390, in _create_connection\n    return _ConnectionRecord(self)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 675, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 901, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/pool/base.py\", line 897, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/create.py\", line 646, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 625, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n", "  File \"/home/umbra/.local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n", "\nThe above exception was the direct cause of the following exception:\n\n", "Traceback (most recent call last):\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/utils/logging_utils.py\", line 171, in sync_wrapper\n    result = func(*args, **kwargs)\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/endpoints/courses.py\", line 172, in read_courses\n    courses = crud.get_courses(\n        db,\n    ...<4 lines>...\n        filter_criteria=parsed_filter_criteria,\n    )\n", "  File \"/run/media/umbra/New Volume/projects/Umbra-Educational-Data-Platform/src/api/v1/crud.py\", line 91, in get_courses\n    raise DatabaseError(detail=f\"Could not retrieve courses: {e}\") from e\n", "src.api.v1.exceptions.DatabaseError: 500: Could not retrieve courses: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"]}, "taskName": null, "api_endpoint": "read_courses", "duration_seconds": 0.05028367042541504, "status": "error", "error_type": "DatabaseError", "performance_metric": true}
