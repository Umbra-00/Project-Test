FROM python:3.11-slim

# Install MLflow
RUN pip install mlflow==2.10.0 psycopg2-binary

# Create directory for artifacts
RUN mkdir -p /mlruns

# Expose MLflow server port
EXPOSE 5000

# Start MLflow server
CMD ["mlflow", "server", "--host", "0.0.0.0", "--port", "5000", "--backend-store-uri", "${MLFLOW_BACKEND_STORE_URI}", "--artifacts-destination", "/mlruns"]
